<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.pjt.user.mapper.UserMapper">

    <select id="findByEmail">
        SELECT id, email, pw, nickname, gender, age 
        FROM user
        WHERE email = #{email}
    </select>
    
    <select id="findById">
        SELECT id, email, pw, nickname, gender, age 
        FROM user
        WHERE id = #{userId}
    </select>
    
    <select id="getUserInfo">
    	SELECT email, gender, age, leader_exp, schedule_exp, finance_exp, logistics_exp, member_exp
    	FROM user u
    		INNER JOIN user_experience e 
    		ON (u.id = e.user_id) 
    	WHERE u.id = #{userId}
    </select>
    
    <insert id="insertUser">
    	INSERT INTO user(id, email, pw, nickname, gender, age)
    	VALUES(#{id},#{email},#{pw},#{nickname},#{gender},#{age})
    </insert>
    
    
    <select id="checkEmailExists">
    	SELECT EXISTS (
    		SELECT 1 FROM user 
    		WHERE email = #{email}
    	)
    </select>
    
    <select id="checkIdExists">
    	SELECT EXISTS (
    		SELECT 1 FROM user 
    		WHERE id = #{userId}
    	)
    </select>
	
</mapper>